apply plugin: 'java'
apply plugin: 'war' 
apply plugin: 'eclipse'
apply plugin: 'distribution'

buildscript {
	repositories {
    	// jcenter()
    	mavenCentral()
  	}
  	dependencies {
		// we need this to get git version info
    	classpath 'org.ajoberstar:gradle-git:0.9.0'
  	}
}

// Custom settings...
sourceCompatibility = 1.8
war.archiveName "fim.war"
def currentVersion = '0.1'
def buildNumber = System.getenv("BUILD_ID") ?: "unknown"
// the version name include the GIT branch name too
import org.ajoberstar.grgit.*
ext.repo = Grgit.open(project.file('.'))
version = "${currentVersion}-${repo.branch.getCurrent().getName()}"

// This is for dependencies...
repositories {
    mavenCentral()
}
dependencies {
    //compile group: 'commons-collections', name: 'commons-collections', version: '3.2'
    compile 'org.slf4j:slf4j-api:1.7.7'
    compile 'ch.qos.logback:logback-core:1.1.2'

	providedCompile 'javax.servlet:servlet-api:2.5'
    testCompile group: 'junit', name: 'junit', version: '4.+'
}

// War customization
war {
    from('.') {
        include 'contributors.txt'
        into('WEB-INF/classes')
    }
}

// This is for creating the zip with distribution content
distributions {
    main {
        baseName = 'fim'
        contents {
            from { 'LICENSE'}
            from { 'README.md'}
            from { 'contributors.txt'}
            from { 'build/libs/'}
            
        }
    }
}

// This is for generating the wrapper used by drone.io
// You should run it with gradle wrapper
task wrapper(type: Wrapper) {
    gradleVersion = '2.0'
}







// Sample to see how to define such things
test {
    systemProperties 'property': 'value'
}
//jar {
//    manifest {
//        attributes 'Implementation-Title': 'Gradle Quickstart', 'Implementation-Version': version
//    }
//}
